{"version":3,"sources":["services/movies-api.js","functions/mappers.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","components/Article/Article.module.css","pages/MovieDetailsPage/MovieDetailsPage.module.css","components/Article/Article.jsx","pages/MovieDetailsPage/MovieDetailsPage.jsx"],"names":["KEY","getTrendingMovies","url","axios","get","getMoviesWithQuery","query","getMovieWithId","id","getCasts","getReviews","movieMapper","movie","image","poster_path","title","userScore","popularity","overview","genres","Math","round","map","name","join","castMapper","items","profile_path","character","trendingMapper","reviewsMapper","author","content","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","module","exports","Article","movieData","onGoback","className","styles","ArticleWrapper","type","Button","onClick","src","alt","width","Description","Addition","AsyncCast","lazy","AsyncReviews","MovieDetailsPage","state","locationFrom","handleGoback","history","props","this","match","location","movieId","params","API","then","data","setState","catch","error","Error","text","from","Wrapper","H5","to","Link","fallback","path","render","Component"],"mappings":"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","file":"static/js/moviedetail-page.63a7c2c3.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst KEY = 'e20119b92c04fa8f0a03b4993a47ca97';\n\nexport const getTrendingMovies = () => {\n  const url = `https://api.themoviedb.org/3/trending/movie/day?api_key=${KEY}`;\n  return axios.get(url);\n};\n\nexport const getMoviesWithQuery = query => {\n  const url = `https://api.themoviedb.org/3/search/movie?api_key=${KEY}&language=en-US&query=${query}&page=1&include_adult=false`;\n  return axios.get(url);\n};\n\nexport const getMovieWithId = id => {\n  const url = `https://api.themoviedb.org/3/movie/${id}?api_key=${KEY}&language=en-US`;\n  return axios.get(url);\n};\n\nexport const getCasts = id => {\n  const url = `https://api.themoviedb.org/3/movie/${id}/credits?api_key=${KEY}`;\n  return axios.get(url);\n};\n\nexport const getReviews = id => {\n  const url = `https://api.themoviedb.org/3/movie/${id}/reviews?api_key=${KEY}&language=en-US&page=1`;\n  return axios.get(url);\n};\n","export const movieMapper = movie => {\n  const imgUrl = 'https://image.tmdb.org/t/p/w400';\n  const {\n    poster_path: image,\n    title,\n    popularity: userScore,\n    overview,\n    genres,\n  } = movie;\n  return {\n    image: image ? imgUrl + image : image,\n    title,\n    userScore: Math.round(userScore),\n    overview,\n    genres: genres.map(({ name }) => name).join(' '),\n  };\n};\n\nexport const castMapper = items => {\n  const imgUrl = 'https://image.tmdb.org/t/p/w400';\n  return items.map(({ id, profile_path: image, name, character }) => ({\n    id,\n    image: image ? imgUrl + image : image,\n    name,\n    character,\n  }));\n};\n\nexport const trendingMapper = items => {\n  return items.map(({ id, title }) => ({\n    id,\n    title,\n  }));\n};\n\nexport const reviewsMapper = items => {\n  return items.map(({ id, author, content }) => ({\n    id,\n    author,\n    content,\n  }));\n};\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ArticleWrapper\":\"Article_ArticleWrapper__1hNqR\",\"Button\":\"Article_Button__2W-ZO\",\"Article\":\"Article_Article__2kQmX\",\"Description\":\"Article_Description__Hk5DJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Wrapper\":\"MovieDetailsPage_Wrapper__1cXlW\",\"H5\":\"MovieDetailsPage_H5__Yv0nY\",\"Link\":\"MovieDetailsPage_Link__3sDwV\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from '../Article/Article.module.css';\n\nconst Article = ({ movieData, onGoback }) => {\n  const { title, image, userScore, overview, genres } = movieData;\n\n  return (\n    <div className={styles.ArticleWrapper}>\n      <button type=\"button\" className={styles.Button} onClick={onGoback}>\n        Go back\n      </button>\n      <article className={styles.Article}>\n        <img src={image} alt=\"\" width=\"200px\" />\n        <div className={styles.Description}>\n          <h2>{title}</h2>\n          <span>User Score: {userScore}</span>\n          <h3>Overview</h3>\n          <p>{overview}</p>\n          <h4>Genres</h4>\n          <p>{genres}</p>\n        </div>\n      </article>\n\n      <div className={styles.Addition}></div>\n    </div>\n  );\n};\n\nArticle.propTypes = {\n  movieData: PropTypes.object.isRequired,\n  onGoback: PropTypes.func.isRequired,\n};\n\nexport default Article;\n","import React, { Component, lazy, Suspense } from 'react';\nimport { NavLink, Route, Switch } from 'react-router-dom';\nimport Article from '../../components/Article/Article';\nimport styles from '../MovieDetailsPage/MovieDetailsPage.module.css';\nimport { movieMapper } from '../../functions/mappers';\nimport * as API from '../../services/movies-api';\n\nconst AsyncCast = lazy(() =>\n  import('../../components/Cast/Cast' /* webpackChunkName: \"cast\" */),\n);\n\nconst AsyncReviews = lazy(() =>\n  import('../../components/Reviews/Reviews' /* webpackChunkName: \"reviews\" */),\n);\n\nexport default class MovieDetailsPage extends Component {\n  state = {\n    movieData: {},\n    locationFrom: null,\n  };\n\n  componentDidMount() {\n    const { match, location } = this.props;\n    const { movieId } = match.params;\n\n    API.getMovieWithId(movieId)\n      .then(({ data }) => this.setState({ movieData: movieMapper(data) }))\n      .catch(error => {\n        Error({\n          text: error,\n        });\n      });\n\n    if (location.state && location.state.from) {\n      this.setState({\n        locationFrom: location.state.from,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.setState({ movieData: {} });\n  }\n\n  handleGoback = () => {\n    const { history } = this.props;\n    const { locationFrom } = this.state;\n\n    if (locationFrom) {\n      history.push({ ...locationFrom });\n    } else {\n      history.push('/');\n    }\n  };\n\n  render() {\n    const { movieData } = this.state;\n    const { match } = this.props;\n    const { movieId } = match.params;\n\n    return (\n      <div>\n        {movieData && (\n          <Article movieData={movieData} onGoback={this.handleGoback} />\n        )}\n\n        <div className={styles.Wrapper}>\n          <h5 className={styles.H5}>Additional information</h5>\n          <ul>\n            <li>\n              <NavLink to={`${match.url}/cast`} className={styles.Link}>\n                Cast\n              </NavLink>\n            </li>\n            <li>\n              <NavLink to={`${match.url}/reviews`} className={styles.Link}>\n                Reviews\n              </NavLink>\n            </li>\n          </ul>\n        </div>\n\n        <Suspense fallback={<p>Loading...</p>}>\n          <Switch>\n            <Route\n              path={`${match.url}/cast`}\n              render={() => <AsyncCast id={movieId} />}\n              id={movieId}\n            />\n            <Route\n              path={`${match.url}/reviews`}\n              render={() => <AsyncReviews id={movieId} />}\n              id={movieId}\n            />\n          </Switch>\n        </Suspense>\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}